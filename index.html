<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Task Manager</title>
    <link href="css/style.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Mensaje de error -->
    <div class="alert" id="messageContainer"></div>

   <!-- spinner --> 
    <div id="spinner-container" class="spinner-hidden">
      <div class="spinner"></div>
    </div>

    <div class="container" id="formLogContainer">
      <div class="form-container" id="loginSection">
        <h2>Ingresar</h2>
        <form id="loginForm">
          <div class="form-group">
            <label for="usernameLogin">Username:</label>
            <input
              type="text"
              id="usernameLogin"
              placeholder="Ingrese su nombre de usuario"
            />
          </div>
          <div class="form-group">
            <label for="passwordLogin">Contraseña:</label>
            <input
              type="password"
              id="passwordLogin"
              placeholder="Ingresa tu contraseña"
            />
          </div>
          <div class="btn-container">
            <button class="btn btn-primary" id="loginBtn">Ingresar</button>
          </div>
          <p>
            No tienes una cuenta?
            <a href="#" id="registerLink">Registrate aquí</a>
          </p>
        </form>
      </div>

      <div class="form-container" id="registerSection" style="display: none">
        <h2>Registro</h2>
        <form id="registerForm">
          <div class="form-group">
            <label for="usernameRegister">Username:</label>
            <input
              type="text"
              id="usernameRegister"
              placeholder="Ingresa un nombre de usuario"
            />
          </div>
          <div class="form-group">
            <label for="emailRegister">Email:</label>
            <input
              type="email"
              id="emailRegister"
              placeholder="Ingrese su email"
            />
          </div>
          <div class="form-group">
            <label for="passwordRegister">Contraseña:</label>
            <input
              type="password"
              id="passwordRegister"
              placeholder="Ingresa una nueva contraseña"
            />
          </div>
          <div class="btn-container">
            <button class="btn" id="registerBtn">Registrarse</button>
          </div>
        </form>
        <p>Ya tienes una cuenta? <a href="#" id="loginLink">Ingresa aquí</a></p>
      </div>
    </div>

    <!-- Contenedor principal del layout -->
    <main class="principal-layout">
      <!-- Side bar -->
      <div class="sidebar-container">
        <aside class="sidebar">
          <ul class="sidebar_list">
            <li class="sidebar_element" id="sidebarInicioSection">
              <img src="assets/dashboard.png" alt="" class="sidebar_icon" />
              <div class="sidebar_hide">
                <p class="sidebar_text">Inicio</p>
              </div>
            </li>
            <li class="sidebar_element" id="sidebarGroupSection">
              <img src="assets/group.png" class="sidebar_icon" />
              <div class="sidebar_hide">
                <p class="sidebar_text">Grupos</p>
              </div>
            </li>
            <li class="sidebar_element" id="sidebarProjectSection">
              <img src="" class="sidebar_icon" />
              <div class="sidebar_hide">
                <p class="sidebar_text">Proyectos</p>
              </div>
            </li>
            <li class="sidebar_element" id="sidebarTaskSection">
              <img src="assets/check-square.png" class="sidebar_icon" />
              <div class="sidebar_hide">
                <p class="sidebar_text">Tareas</p>
              </div>
            </li>
            <li class="sidebar_element" id="sidebarChatSection">
              <img src="assets/message-circle.png" class="sidebar_icon" />
              <div class="sidebar_hide">
                <p class="sidebar_text">Chat</p>
              </div>
            </li>

            <li class="sidebar_element sidebar_element--avatar">
              <img
                src="assets/user.png"
                alt=""
                class="sidebar_icon sidebar_icon--avatar"
              />
              <div class="sidebar_hide">
                <h3 class="sidebar_title">Mirko</h3>
                <p class="sidebar_info">Cuenta Free</p>
                <button type="button" class="btn btn-error btn-sm btn-block" id="logoutBtn">Cerrar sesión</button>
              </div>
            </li>
          </ul>
        </aside>
      </div>

      <!-- Dashboard Layout -->
      <div class="dashboard-layout">
        <!-- Dashboard - Inicio section -->
        <section id="inicioSection">
          <h2>Dashboard</h2>
          <div id="pendingTaskWidget" class="partSections">
            <h3>Tareas pendientes próximas a vencer</h3>
            <ol id="taskDueSoon"></ol>
          </div>
          <div id="projectProgress" class="partSections">
            <h3>Progreso de los proyectos</h3>
            <ol id="projectProgressList"></ol>
          </div>
          <div class="partSections">
            <h3>Notificaciones</h3>
            <ul></ul>
          </div>
        </section>

        <!-- Dashboard - Group section -->
        <section id="groupSection" style="display: none">
          <h2>Mis Grupos</h2>
          <div class="partSections">
            <div class="headerPartSection">
              <h3>Grupos</h3>
              <button type="button" class="btn btn-primary" id="createGroupBtn">
                <span>+ Crear grupo</span>
              </button>
            </div>
            <div id="groupList"></div>
          </div>
        </section>

        <!-- Dashboard - Project section -->
        <section id="projectSection" style="display: none">
          <h2>Proyectos</h2>
          <div class="partSections">
            <h3>Mis Proyectos</h3>
            <ol id="projectList"></ol>
          </div>
        </section>

        <!-- Dashboard - Task section -->
        <section id="taskSection" style="display: none">
          <h2>Tareas</h2>
          <div class="partSections taskPartSection">
            <h3>Proyectos</h3>
          </div>
          <div class="partSections taskPartSection">
            <h3>Tareas</h3>
            <ol id="taskList">
              <li></li>
            </ol>
          </div>
        </section>

        <!-- Dashboard - Chat section -->
        <section id="chatSection" style="display: none">
          <h2>Chat</h2>
          <div class="partSections">
            <h3>Proyectos</h3>
            <ol id="projectListToChat"></ol>
          </div>
          <div class="partSections">
            <h3>Chat</h3>
            <ul id=""></ul>
          </div>
        </section>
      </div>
    </main>

    <!-- Template de grupos -->
    <template id="groupTemplate">
      <div class="card">
        <h4 class="groupName"></h4>
        <p class="numbersOfMembers"></p>
        <div class="template-hide ">
          <p class="groupDescription"></p>
          <button id="moreDetailsGroup"
            type="button"
            class="btn btn-sm btn-outline-primary btn-manage"
            data-group-id="{{group_id}}"
            data-group-name="{{name}}"
            data-group-description="{{description}}">
            Más detalles
          </button>
        </div>
      </div>
    </template>

    <template id="userGroupTemplate">
      <div class="body-template">
        <div class="info-template">
          <p class="userName"></p>
          <p class="userRole"></p>
        </div>
        <div class="actionTemplate">
          <button
            type="button" 
            class="btn btn-vsm btn-outline-error"
            id="deleteUserGroup"
            data-group-id="{{group_id}}"
            data-user-id="{{user_id}}">
            Eliminar
          </button>
          <button
            type="button"
            class="btn btn-vsm btn-secondary"
            id="editRoleGroup"
            data-group-id="{{group_id}}"
            data-user-id="{{user_id}}">
            Editar
          </button>
        </div>
      </div>
    </template>

    <!-- Template de proyectos -->
    <template id="projectTemplate">
      <div class="card">
        <h4 class="projectTittle"></h4>
        <div class="template-hide">
          <h4>Miembros</h4>
          <ol>
            <li></li>
          </ol>
        </div>
        <button type="button" id="accessProjectChat">Acceder al chat</button>
      </div>
    </template>

    <!-- Template de tareas -->
    <template id="taskTemplate">
      <div class="card">
        <h4 class="taskTitle"></h4>
        <p class="taskPriority"></p>
        <p class="taskDueDate"></p>
        <ol>
          <li id="userAssigned"></li>
        </ol>
      </div>
    </template>

    <!-- Template de mensajes -->
    <template id="messageTemplate">
      <div class="card">
        <p class="textMessage"></p>
        <p class="dateMessage"></p>
      </div>
    </template>

    <!-- Template de notificaciones -->
    <template id="notificationTemplate">
      <div class="card"></div>
    </template>

    <!-- Template de usuarios -->
    <template id="userList">
      <div class="body-template">
        <div class="info-template">
          <p class="userName"></p>
          <p class="userId" style="display: none;"></p>
        </div>
        <div class="actionTemplate">
          <button type="button" class="btn btn-sm" id="addUserToGroup" data-group-id="{{group_id}}" data-user-id="{{user_id}}">Agregar</button>
        </div>
      </div>
    </template>


    <!-- Modal para forms -->
    <div class="modal-backdrop hidden" id="modalGroup" >
      <div class="modal">
        <h3>Crear un nuevo grupo</h3>
        <form>
          <input type="text" placeholder="Nombre del grupo" id="newGroupName">
          <textarea rows="3" placeholder="Descripción del grupo" id="newGroupDescription"></textarea>
          <div class="modal-actions">
            <button type="button" class="btn btn-outline-error" id="cancelGroup">Cancelar</button>
            <button type="button" class="btn btn-primary" id="saveGroup">Crear</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal para mas información -->
    <div class="modal-backdrop hidden" id="modalInfoGroup" >
      <div class="modal">
        <h3 class="groupName">Nombre de grupo</h3>
        <h4>Descripción:</h4>
        <p class="groupDescription">Descripción del grupo</p>
        <h4>Miembros</h4>
        <ol class="listUser">
        </ol>
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn-primary btn-sm"
              id="addUserGroup"
              data-group-id="{{group_id}}"
              data-user-id="{{user_id}}">
              Agregar Usuario
            </button>
            <button
              type="button" 
              class="btn btn-error btn-sm"
              id="deleteGroup"
              data-group-id="{{group_id}}"
              data-user-id="{{user_id}}">
              Eliminar Grupo
            </button>
    </div>

    <!-- Modal de lista de usuarios para agregar -->
    <div class="modal-backdrop hidden" id="allUsersList">
      <div class="modal">
        <h3>Usuarios</h3>
        <ol class="listUser">
        </ol>
      </div>
    </div>
    <script type="module" src="js/login.js"></script>
    <script type="module" src="js/dom.js"></script>
    <script type="module" src="js/dashboard.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/auth.js"></script>
  </body>
</html>
